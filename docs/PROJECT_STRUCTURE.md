# ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ¯ æ–°çš„ç›®å½•ç»“æ„ï¼ˆå·²é‡ç»„ï¼‰

```
Tourism_system/
â”œâ”€â”€ ğŸ“„ runtest.py              # ğŸ†• ç»Ÿä¸€æµ‹è¯•ä¸å·¥å…·å…¥å£
â”œâ”€â”€ ğŸ“„ run_tests.py            # æ—§ç‰ˆæµ‹è¯•å…¥å£ï¼ˆä¿ç•™å…¼å®¹ï¼‰
â”œâ”€â”€ ğŸ“„ pyproject.toml          # UV é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ ğŸ“„ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ ğŸ“„ README.md               # é¡¹ç›®æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“‚ src/                    # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“„ api.py              # FastAPI ä¸»è·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“„ main.py             # å‘½ä»¤è¡Œå·¥å…·å…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ database.py         # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ models.py           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“„ auth.py             # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“„ diary.py            # æ—¥è®°ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ğŸ“„ ai.py               # AI/RAG åŠŸèƒ½
â”‚   â”œâ”€â”€ ğŸ“„ crawler.py          # çˆ¬è™«å°è£…
â”‚   â”œâ”€â”€ ğŸ“„ algorithms.py       # è·¯å¾„ç®—æ³•
â”‚   â”œâ”€â”€ ğŸ“„ utils.py            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ upload.py           # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”œâ”€â”€ ğŸ“„ create_tables.py    # å»ºè¡¨è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ import_data.py      # æ•°æ®å¯¼å…¥
â”‚   â””â”€â”€ ğŸ“‚ tools/
â”‚       â””â”€â”€ ğŸ“‚ Spider_XHS/     # å°çº¢ä¹¦çˆ¬è™«æ¨¡å—
â”‚
â”œâ”€â”€ ğŸ“‚ tools/                  # ğŸ†• åŠŸèƒ½å·¥å…·ï¼ˆå¸¸ç”¨ï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ view_database.py    # æŸ¥çœ‹æ•°æ®åº“æ•°æ®
â”‚   â”œâ”€â”€ ğŸ“„ import_crawled_data.py  # çˆ¬è™«æ•°æ®å¯¼å…¥ï¼ˆæ¨èï¼‰
â”‚   â””â”€â”€ ğŸ“„ crawl_import.py     # æ—§ç‰ˆçˆ¬è™«å¯¼å…¥
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                  # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ test_register.py    # æ³¨å†Œæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_login.py       # ç™»å½•æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_nav.py         # å¯¼èˆªæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_ai.py          # AI æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_rag.py         # RAG æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_search.py      # æœç´¢æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_comment.py     # è¯„è®ºæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_flow.py        # å®Œæ•´æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“‚ tools/              # ğŸ†• æµ‹è¯•å·¥å…·
â”‚       â”œâ”€â”€ ğŸ“„ check_ids.py    # æŸ¥çœ‹æ™¯ç‚¹åˆ—è¡¨
â”‚       â”œâ”€â”€ ğŸ“„ check_table_structure.py  # æŸ¥çœ‹è¡¨ç»“æ„
â”‚       â”œâ”€â”€ ğŸ“„ test_data_length.py       # æ•°æ®é•¿åº¦æµ‹è¯•
â”‚       â”œâ”€â”€ ğŸ“„ test_spider_run.py        # çˆ¬è™«æµ‹è¯•
â”‚       â””â”€â”€ ğŸ“„ upgrade_database.py       # æ•°æ®åº“å‡çº§
â”‚
â”œâ”€â”€ ğŸ“‚ data/                   # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ campus_map.json     # æ ¡å›­åœ°å›¾æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/               # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ index.html
â”‚   â”œâ”€â”€ ğŸ“„ app.js
â”‚   â””â”€â”€ ğŸ“„ style.css
â”‚
â”œâ”€â”€ ğŸ“‚ downloads/              # çˆ¬è™«ä¸‹è½½ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ excel/              # Excel å¤‡ä»½
â”‚   â””â”€â”€ ğŸ“‚ media/              # å›¾ç‰‡/è§†é¢‘
â”‚
â””â”€â”€ ğŸ“‚ uploads/                # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1ï¼šä½¿ç”¨æ–°çš„ç»Ÿä¸€å…¥å£ï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
python runtest.py help

# æ•°æ®åº“ç›¸å…³
python runtest.py db-view              # æŸ¥çœ‹æ•°æ®åº“
python runtest.py spots                # æŸ¥çœ‹æ™¯ç‚¹
python runtest.py db-upgrade           # å‡çº§æ•°æ®åº“

# çˆ¬è™«ç›¸å…³
python runtest.py crawl                # äº¤äº’å¼çˆ¬å–
python runtest.py crawl "åŒ—é‚®é£Ÿå ‚"      # çˆ¬å–æŒ‡å®šå…³é”®è¯
python runtest.py crawl-batch "é£Ÿå ‚" "å›¾ä¹¦é¦†"  # æ‰¹é‡çˆ¬å–

# æµ‹è¯•ç›¸å…³
python runtest.py test-register        # æµ‹è¯•æ³¨å†Œ
python runtest.py test-ai              # æµ‹è¯•AI
python runtest.py test-all             # è¿è¡Œæ‰€æœ‰æµ‹è¯•
```

### æ–¹å¼ 2ï¼šä½¿ç”¨ UV è¿è¡Œï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰

```bash
# æ•°æ®åº“
uv run python runtest.py db-view

# çˆ¬è™«
uv run python runtest.py crawl

# æµ‹è¯•
uv run python runtest.py test-all
```

### æ–¹å¼ 3ï¼šç›´æ¥è¿è¡Œæ¨¡å—ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

```bash
# åŠŸèƒ½å·¥å…·ï¼ˆåœ¨ tools/ ç›®å½•ä¸‹ï¼‰
uv run tools/view_database.py
uv run tools/import_crawled_data.py

# æµ‹è¯•å·¥å…·ï¼ˆåœ¨ tests/tools/ ç›®å½•ä¸‹ï¼‰
uv run tests/tools/check_ids.py
uv run tests/tools/upgrade_database.py

# ä¸šåŠ¡æµ‹è¯•ï¼ˆåœ¨ tests/ ç›®å½•ä¸‹ï¼‰
uv run tests/test_register.py
```

---

## ğŸ“Š ç›®å½•å¯¹æ¯”ï¼šé‡ç»„å‰å

| ä½ç½® | é‡ç»„å‰ âŒ | é‡ç»„å âœ… |
|------|----------|----------|
| æ ¹ç›®å½• | æ··ä¹±ï¼Œ15+ ä¸ªè„šæœ¬ | æ¸…çˆ½ï¼Œåªæœ‰æ ¸å¿ƒæ–‡ä»¶ |
| åŠŸèƒ½å·¥å…· | æ•£è½åœ¨æ ¹ç›®å½• | é›†ä¸­åœ¨ `tools/` |
| æµ‹è¯•å·¥å…· | æ•£è½åœ¨æ ¹ç›®å½• | é›†ä¸­åœ¨ `tests/tools/` |
| ä¸šåŠ¡æµ‹è¯• | åœ¨ `tests/` | ä¿æŒåœ¨ `tests/` âœ… |
| å¯åŠ¨æ–¹å¼ | å„è‡ªç‹¬ç«‹è¿è¡Œ | ç»Ÿä¸€ `runtest.py` å…¥å£ |

---

## ğŸ¯ ç›®å½•èŒè´£

### `src/` - æ ¸å¿ƒæºä»£ç 
- åŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘å’Œåç«¯ä»£ç 
- **ä¸è¦æ”¹åŠ¨**ï¼Œé™¤éä¿®æ”¹æ ¸å¿ƒåŠŸèƒ½

### `tools/` - åŠŸèƒ½å·¥å…·
- **å¸¸ç”¨å·¥å…·**ï¼Œé¢å‘ç”¨æˆ·
- æ•°æ®åº“æŸ¥çœ‹ã€çˆ¬è™«å¯¼å…¥ç­‰

### `tests/` - æµ‹è¯•ä»£ç 
- ä¸šåŠ¡åŠŸèƒ½æµ‹è¯•
- API æ¥å£æµ‹è¯•

### `tests/tools/` - æµ‹è¯•å·¥å…·
- **è¾…åŠ©æµ‹è¯•çš„å·¥å…·**
- æ•°æ®åº“å‡çº§ã€è¡¨ç»“æ„æ£€æŸ¥ç­‰

---

## ğŸ’¡ è¿ç§»è¯´æ˜

### å·²ç§»åŠ¨çš„æ–‡ä»¶

**åŠŸèƒ½å·¥å…· â†’ `tools/`ï¼š**
- âœ… `view_database.py`
- âœ… `import_crawled_data.py`
- âœ… `crawl_import.py`

**æµ‹è¯•å·¥å…· â†’ `tests/tools/`ï¼š**
- âœ… `check_ids.py`
- âœ… `check_table_structure.py`
- âœ… `test_data_length.py`
- âœ… `test_spider_run.py`
- âœ… `upgrade_database.py`

### ä¿ç•™åœ¨æ ¹ç›®å½•çš„æ–‡ä»¶
- âœ… `runtest.py` - ç»Ÿä¸€å…¥å£
- âœ… `run_tests.py` - æ—§ç‰ˆå…¥å£ï¼ˆå…¼å®¹ï¼‰
- âœ… `pyproject.toml` - é¡¹ç›®é…ç½®
- âœ… `README.md` - æ–‡æ¡£
- âœ… `.env` - ç¯å¢ƒå˜é‡

---

## ğŸ”— å¿«é€Ÿé“¾æ¥

| åŠŸèƒ½ | å‘½ä»¤ |
|------|------|
| æŸ¥çœ‹æ•°æ®åº“ | `python runtest.py db-view` |
| æŸ¥çœ‹æ™¯ç‚¹ | `python runtest.py spots` |
| çˆ¬å–æ•°æ® | `python runtest.py crawl` |
| æµ‹è¯•AI | `python runtest.py test-ai` |
| æ‰€æœ‰æµ‹è¯• | `python runtest.py test-all` |
| å¸®åŠ© | `python runtest.py help` |

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ—§å‘½ä»¤ä»ç„¶å¯ç”¨**ï¼š
   ```bash
   uv run tools/view_database.py  # âœ… ä»ç„¶æœ‰æ•ˆ
   ```

2. **æ¨èä½¿ç”¨æ–°æ–¹å¼**ï¼š
   ```bash
   python runtest.py db-view      # âœ… æ›´ç®€æ´
   ```

3. **è·¯å¾„å¼•ç”¨å·²æ›´æ–°**ï¼š
   - æ‰€æœ‰è„šæœ¬çš„å¯¼å…¥è·¯å¾„å·²è‡ªåŠ¨å¤„ç†
   - æ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»£ç 

---

éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹ [README.md](../README.md) æˆ–è¿è¡Œ `python runtest.py help`
